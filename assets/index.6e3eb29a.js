var T=Object.defineProperty;var w=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var A=(o,n,t)=>n in o?T(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,$=(o,n)=>{for(var t in n||(n={}))E.call(n,t)&&A(o,t,n[t]);if(w)for(var t of w(n))N.call(n,t)&&A(o,t,n[t]);return o};var j=(o,n)=>{var t={};for(var s in o)E.call(o,s)&&n.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&w)for(var s of w(o))n.indexOf(s)<0&&N.call(o,s)&&(t[s]=o[s]);return t};var y=(o,n,t)=>new Promise((s,F)=>{var m=i=>{try{c(t.next(i))}catch(a){F(a)}},g=i=>{try{c(t.throw(i))}catch(a){F(a)}},c=i=>i.done?s(i.value):Promise.resolve(i.value).then(m,g);c((t=t.apply(o,n)).next())});import U from"./FormRender.ac03c6d4.js";import{aV as X,ah as D,am as Y,aL as Z,eq as O,a as x,v as I,f as P,fJ as oo,ao as eo,a4 as B,au as to,k as no,aw as R,o as k,h as z,n as q,z as V,F as ro,az as so,j as io,ay as ao,aA as mo,aB as lo,aC as fo,ax as co}from"./index.e3f30c55.js";/* empty css              *//* empty css              */import{a as po}from"./index.def48a32.js";import{F as G}from"./Form.4f363030.js";import{b as uo,f as H}from"./index.9484cbc2.js";import{R as J}from"./index.eaac2b21.js";import{C as Fo}from"./index.e2fc098a.js";import"./index.cf5de3df.js";import"./formItemConfig.bfd19c85.js";import"./componentMap.01f0ce6e.js";import"./index.2678217d.js";import"./Checkbox.656e1db7.js";import"./index.59cf3b53.js";import"./index.addfe94d.js";import"./index.1a2edb77.js";import"./index.069489b5.js";import"./index.a0337c99.js";import"./index.2df10aa4.js";import"./index.8d35092d.js";import"./useFormItem.cf111819.js";import"./RadioButtonGroup.25de5002.js";import"./get.5fbe7494.js";import"./index.525fac41.js";import"./eagerComputed.ad2f1ebf.js";import"./DeleteOutlined.59f01a92.js";import"./transButton.cb4b83f4.js";import"./index.be87f19c.js";import"./useFlexGapSupport.153cff5a.js";import"./index.316adb4b.js";import"./useWindowSizeFn.7ce1f350.js";import"./FullscreenOutlined.edd56a8c.js";import"./index.a43cf7b9.js";import"./useRefs.e708542e.js";import"./index.b8269de0.js";import"./index.e1777527.js";import"./isNumber.eb231e79.js";import"./uuid.2b29000c.js";import"./download.7a145835.js";import"./base64Conver.08b9f4ec.js";import"./index.a5b66f28.js";import"./index.fe73d8a5.js";import"./_baseIteratee.d85adb84.js";import"./useFormDesignState.657ad056.js";import"./Col.2dc850f4.js";import"./useSize.20ea1e36.js";function go(o){return typeof o=="function"?o:X}function W(o,n){return o&&po(o,go(n))}function ho(o,n,t,s){(()=>{const p=Z(),h=p==null?void 0:p.parent;!h||o.formConfig.schemas.forEach(d=>{W(d.componentProps,(v,e)=>{O(v)&&(d.componentProps[e]=v.bind(h))}),W(d.on,(v,e)=>{O(v)&&(d.componentProps[e]=v.bind(h))})})})();const{emit:m}=t,g=G.useForm,{resetFields:c,validate:i,clearValidate:a,validateField:C}=g(n,[]);return{validate:i,validateField:C,resetFields:c,clearValidate:a,submit:()=>y(this,null,function*(){var h,d;const p=D(Y(n.value));return m==null||m("submit",p),(d=(h=o.formConfig).submit)==null||d.call(h,p),p})}}function Co(o,n,t,s){const F=e=>uo(o.formConfig.schemas,r=>r.field===e),m=(e,r,l)=>{const f=F(e);f&&(f[r]=l)},g=(e,r,l)=>{const f=F(e);f!=null&&f.componentProps&&(["options","treeData"].includes(r)&&c(e,void 0),f.componentProps[r]=l)},c=(e,r)=>{var l;typeof e=="string"?(o.formModel[e]=r,(l=t.value)==null||l.validateField(e,r,[])):Object.keys(e).forEach(u=>{var M;o.formModel[u]=e[u],(M=t.value)==null||M.validateField(u,e[u],[])})},i=(e,r)=>{o.formConfig[e]=r},a=e=>D(o.formModel)[e],C=()=>y(this,null,function*(){return D(o.formModel)}),b=e=>{m(e,"hidden",!0)},p=e=>{typeof e=="string"?g(e,"disabled",!0):i("disabled",e!==!1)},h=e=>{m(e,"hidden",!1)},d={};return(e=>{H(e,r=>{H(e,l=>{var f;d[l.field]||(d[l.field]=new Set),((f=r.link)==null?void 0:f.includes(l.field))&&O(r.update)&&d[l.field].add(r)}),d[r.field].add(r)})})(o.formConfig.schemas),$({linkOn:d,setValue:c,getValue:a,hidden:b,show:h,set:m,get:F,setProps:g,getData:C,disable:p},s)}const vo=x({name:"VFormCreate",components:{FormRender:U,Form:G,Row:J},props:{fApi:{type:Object},formModel:{type:Object,default:()=>({})},formConfig:{type:Object,required:!0}},emits:["submit","change","update:fApi","update:formModel"],setup(o,n){const t=o.formConfig.layout=="vertical"?Fo:J,{emit:s}=n,F=I(null),m=P({get:()=>o.formModel,set:u=>s("update:formModel",u)}),g=P(()=>o.formConfig.schemas&&o.formConfig.schemas.filter(u=>u.hidden!==!0)),c=oo(o,"fApi",s),{submit:i,validate:a,clearValidate:C,resetFields:b,validateField:p}=ho(o,m,n),f=Co({formConfig:o.formConfig,formData:o.formModel},n,F,{submit:i,validate:a,validateField:p,resetFields:b,clearValidate:C}),{linkOn:h}=f,d=j(f,["linkOn"]);c.value=d;const v=u=>{var S;const{schema:M,value:K}=u,{field:Q}=no(M);(S=h[Q])==null||S.forEach(_=>{var L;(L=_.update)==null||L.call(_,K,_,c.value)})},e=P(()=>eo(o.formConfig,["disabled","labelWidth","schemas"])),r=()=>{i()};B("formModel",m);const l=(u,M)=>{m.value[u]=M};return B("setFormModelMethod",l),{eFormModel:F,submit:i,validate:a,validateField:p,resetFields:b,clearValidate:C,handleChange:v,formModelProps:e,handleSubmit:r,setFormModel:l,formModelNew:m,wrapperComp:t,noHiddenList:g}}}),Mo={class:"v-form-container"};function bo(o,n,t,s,F,m){const g=R("FormRender"),c=R("Row"),i=R("Form");return k(),z("div",Mo,[q(i,co({class:"v-form-model",ref:"eFormModel",model:o.formModel},o.formModelProps),{default:V(()=>[q(c,null,{default:V(()=>[(k(!0),z(ro,null,so(o.noHiddenList,(a,C)=>(k(),io(g,{key:C,schema:a,formConfig:o.formConfig,formData:o.formModelNew,onChange:o.handleChange,setFormModel:o.setFormModel,onSubmit:o.handleSubmit,onReset:o.resetFields},ao({_:2},[a&&a.componentProps?{name:"schema.componentProps!.slotName",fn:V(()=>[mo(o.$slots,a.componentProps.slotName,lo(fo({formModel:o.formModel,field:a.field,schema:a})),void 0,!0)]),key:"0"}:void 0]),1032,["schema","formConfig","formData","onChange","setFormModel","onSubmit","onReset"]))),128))]),_:3})]),_:3},16,["model"])])}var ge=to(vo,[["render",bo],["__scopeId","data-v-0905ebe6"]]);export{ge as default};
